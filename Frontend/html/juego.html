<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Magnar WarGames - Juego</title>
  <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
  <link rel="stylesheet" href="../css/stylejuego.css">
</head>
<body>
     <!-- BARRA SUPERIOR -->
    <div id="top-bar">
      <div class="top-bar-left">
        <div id="turno-jugador" class="turno-texto">Turno 1</div>
        <div id="accion-jugador" class="accion-texto">Acción 1</div>
      </div>
      <div class="top-bar-right">
        <!-- #logo-casa-container and #oro-jugador are MOVED OUT for mobile and handled by #mobile-main-feature -->
        <!-- On PC, #logo-casa-container is typically hidden, and #pc-gold-display shows gold. -->
        <!-- If you need gold in the top-bar on mobile *as well*, you'd add a separate element here. -->
      </div>
    </div>

    <div id="estado-turno"></div>

    

    <div class="game-ui-container">

     <div id="zona-unidades-militares" class="side-panel panel-top-left">
            <h3>Unidades Militares</h3>
            <ul id="lista-unidades-jugador"></ul>
        </div>

      <div id="zona-edificios" class="side-panel panel-top-right">
            <h3>Edificios</h3>
            <ul id="lista-edificios-jugador"></ul>
        </div>

        <div id="cuadro-rumores" class="side-panel panel-bottom-right"> <!-- Contenido movido aquí para móvil -->
            <strong>🕵️ Rumores</strong>
            <ul id="lista-rumores"> <!-- Usar la misma lista o una copia; asegúrate que JS la popule correctamente -->
            </ul>
        </div>

        

        <div class="center-actions-stack pc-only-inline-block">
            <!-- Group ALL buttons that should appear in the central stack here -->
            <button id="btn-batalla1" class="game-action-bar">⚔️ Batalla</button>
            <button id="btn-reclutar1" class="btn-accion-juego game-action-bar">➕ Reclutar</button>
            <button id="btn-construir1" class="btn-accion-juego game-action-bar">🔨 Construir</button>
            <button id="btn-mover1" class="game-action-bar">➡️ Mover</button>
            <button id="btn-reorganizar1" class="btn-accion-juego game-action-bar">🔄 Reorganizar</button>

            <div id="contador-stark1" class="game-action-bar-info">
                Contador acciones del norte: <span id="valor-contador-stark1">0</span>
             </div>
            <button id="btn-stark-atacar1" class="btn-accion-juego game-action-bar" style="display: none;">🧊 Atacar en el norte</button>
            <button id="btn-stark-mover1" class="btn-accion-juego game-action-bar" style="display: none;">➡️ Mover en el norte</button>
            <button id="btn-stark-reorganizar1" class="btn-accion-juego game-action-bar" style="display: none;">🔄 Reorganizar en el norte</button>
            <button id="btn-stark-reclutar1" class="btn-accion-juego game-action-bar" style="display: none;">➕ Reclutar en el norte</button>
            <!-- Botón duplicado eliminado -->
            <button id="btn-levas-stark1" class="btn-accion-juego game-action-bar" style="display: none;">🛡️ Levantamiento de Levas</button>
            <button id="btn-organizar-torneo1" class="btn-accion-juego game-action-bar" style="display: none;">🏇 Organizar Torneo</button>
            <button id="btn-doble-impuestos1" class="game-action-bar" style="display: none;">💰 Doble Impuestos</button>
            <button id="btn-sobornar-soldados1" class="btn-accion-juego game-action-bar" style="display: none;">🪙 Sobornar Soldados</button>
            <button id="btn-saquear-greyjoy1" class="btn-accion-juego game-action-bar" style="display: none;">⚓ Saquear</button>
            <button id="btn-ritual-kraken-greyjoy1" class="btn-accion-juego game-action-bar" style="display: none;">🐙 Ritual de Sal</button>
            <button id="btn-revuelta-campesina1" class="btn-accion-juego game-action-bar" style="display: none;">🌾 Iniciar Revuelta Campesina</button>
        </div>

        <div id="cuadro-rumores-1" class="side-panel panel-bottom-right pc-only-block">
            <strong>🕵️ Rumores</strong>
            <ul id="lista-rumores1"></ul>
        </div>
    </div>

    <!-- NUEVO: Contenedor para botones y rumores en la parte inferior fija (solo móvil) -->
    <div id="mobile-bottom-bar" class="mobile-only">
        <div class="center-actions-stack"> <!-- Contenido movido aquí para móvil -->
            <!-- Group ALL buttons that should appear in the central stack here -->
            <button id="btn-batalla" class="game-action-bar">⚔️ Batalla</button>
            <button id="btn-reclutar" class="btn-accion-juego game-action-bar">➕ Reclutar</button>
            <button id="btn-construir" class="btn-accion-juego game-action-bar">🔨 Construir</button>
            <button id="btn-mover" class="game-action-bar">➡️ Mover</button>
            <button id="btn-reorganizar" class="btn-accion-juego game-action-bar">🔄 Reorganizar</button>

            <div id="contador-stark" class="game-action-bar-info">
                Contador acciones del norte: <span id="valor-contador-stark">0</span>
             </div>
            <button id="btn-stark-atacar" class="btn-accion-juego game-action-bar" style="display: none;">🧊 Atacar en el norte</button>
            <button id="btn-stark-mover" class="btn-accion-juego game-action-bar" style="display: none;">➡️ Mover en el norte</button>
            <button id="btn-stark-reorganizar" class="btn-accion-juego game-action-bar" style="display: none;">🔄 Reorganizar en el norte</button>
            <button id="btn-stark-reclutar" class="btn-accion-juego game-action-bar" style="display: none;">➕ Reclutar en el norte</button>
            <!-- Botón duplicado eliminado -->
            <button id="btn-levas-stark" class="btn-accion-juego game-action-bar" style="display: none;">🛡️ Levantamiento de Levas</button>
            <button id="btn-organizar-torneo" class="btn-accion-juego game-action-bar" style="display: none;">🏇 Organizar Torneo</button>
            <button id="btn-doble-impuestos" class="game-action-bar" style="display: none;">💰 Doble Impuestos</button>
            <button id="btn-sobornar-soldados" class="btn-accion-juego game-action-bar" style="display: none;">🪙 Sobornar Soldados</button>
            <button id="btn-saquear-greyjoy" class="btn-accion-juego game-action-bar" style="display: none;">⚓ Saquear</button>
            <button id="btn-ritual-kraken-greyjoy" class="btn-accion-juego game-action-bar" style="display: none;">🐙 Ritual de Sal</button>
            <button id="btn-revuelta-campesina" class="btn-accion-juego game-action-bar" style="display: none;">🌾 Iniciar Revuelta Campesina</button>
        </div>


        <!-- NUEVO: Contenedor para logo grande y oro en el centro (solo móvil) -->
    <div id="mobile-main-feature" class="mobile-only">
      <div id="logo-casa-container"> <!-- Movido desde top-bar -->
          <img id="logo-casa" src="" alt="Logo de casa"> <!-- JS actualiza src -->
      </div>
      <div id="oro-jugador"> <!-- Movido desde top-bar -->
        <img id="logo-oro" src="../imgs/Interfaz/oro.png" alt="Oro">
        <span id="cantidad-oro">0</span> <!-- JS actualiza este valor -->
      </div>
    </div>
        
    </div>

    <!-- Modal Tyrell Inicio Combinado -->
<div id="modal-inicial-tyrell" class="modal-juego" style="display: none; z-index: 99999;">
  <h2>🌿 Tyrell: Configura tu inicio</h2>

  <div class="campo-formulario">
    <label for="select-tyrell-granja">Selecciona territorio para tu Granja:</label>
    <select id="select-tyrell-granja"><option value="">-- Selecciona --</option></select>
  </div>

  <div class="campo-formulario">
    <label for="input-oro-tyrell">💰 Oro Extra:</label>
    <input type="number" id="input-oro-tyrell" min="0" value="50" style="width: 100%;">
  </div>

  <div class="campo-formulario">
    <label for="input-tropas-tyrell">🛡️ Tropas Iniciales:</label>
    <input type="number" id="input-tropas-tyrell" min="0" value="30" style="width: 100%;">
  </div>

  <div class="campo-formulario">
      <label for="select-rumor-inicial-tyrell">📜 Rumor inicial:</label>
      <select id="select-rumor-inicial-tyrell">
        <option value="">-- Ninguno --</option>
      </select>
    </div>



  <div class="botones-modal" style="margin-top: 20px;">
    <button id="btn-confirmar-inicial-tyrell" class="btn-confirmar" style="width: 100%;">
      ✔️ Confirmar
    </button>
  </div>
</div>

<!-- Modal Arryn Inicio Combinado -->
<div id="modal-inicial-arryn" class="modal-juego" style="display: none; z-index: 99999;">
  <h2>🦅 Arryn: Configura tu inicio</h2>

  <div class="campo-formulario">
    <label for="input-caballeros-arryn">¿Con cuántos caballeros comienzas?</label>
    <input type="number" id="input-caballeros-arryn" min="0" value="0" style="width: 100%;">
  </div>

  <div class="campo-formulario">
    <label for="input-oro-arryn">💰 Oro Extra:</label>
    <input type="number" id="input-oro-arryn" min="0" value="50" style="width: 100%;">
  </div>

  <div class="campo-formulario">
    <label for="input-tropas-arryn">🛡️ Tropas Iniciales:</label>
    <input type="number" id="input-tropas-arryn" min="0" value="30" style="width: 100%;">
  </div>

  <div class="campo-formulario">
      <label for="select-rumor-inicial-arryn">📜 Rumor inicial:</label>
      <select id="select-rumor-inicial-arryn">
        <option value="">-- Ninguno --</option>
      </select>
    </div>

  <div class="botones-modal" style="margin-top: 20px;">
    <button id="btn-confirmar-inicial-arryn" class="btn-confirmar" style="width: 100%;">
      ✔️ Confirmar
    </button>
  </div>
</div>

    <!-- Modal Ataque Simple Mejorado -->
<div id="modal-ataque-simple" class="modal-juego" style="display: none;">
  <h2>⚔️ Ataque</h2>

  <!-- Primer territorio -->
  <div class="campo-formulario">
    <label for="select-territorio-ataque1">🛡️ Primer territorio a atacar:</label>
    <select id="select-territorio-ataque1"><option value="">-- Selecciona --</option></select>
  </div>

  <!-- Segundo territorio -->
  <div class="campo-formulario">
    <label for="select-territorio-ataque2">🛡️ Segundo territorio (opcional):</label>
    <select id="select-territorio-ataque2"><option value="">-- Ninguno --</option></select>
  </div>

  <!-- Lista de pérdidas por unidad -->
  <div class="campo-formulario">
    <div id="contenedor-perdidas-ataque"></div>
  </div>

  <!-- ¿Ganó el primer territorio? -->
  <div class="campo-formulario">
    <label>¿Ganaste el PRIMER territorio?</label><br>
    <label><input type="radio" name="resultado-ataque1" value="si" checked> Sí</label>
    <label><input type="radio" name="resultado-ataque1" value="no"> No</label>
    <div id="asignar-propietario-ataque1" class="campo-formulario" style="display: none;">
  <label for="select-propietario-ataque1">¿Quién se queda con el PRIMER territorio?</label>
  <select id="select-propietario-ataque1">
    <option value="">-- Elige casa --</option>
  </select>
</div>


  </div>

  <!-- ¿Ganó el segundo territorio? -->
  <div class="campo-formulario">
    <label>¿Ganaste el SEGUNDO territorio?</label><br>
    <label><input type="radio" name="resultado-ataque2" value="si" checked> Sí</label>
    <label><input type="radio" name="resultado-ataque2" value="no"> No</label>
    <div id="asignar-propietario-ataque2" class="campo-formulario" style="display: none;">
  <label for="select-propietario-ataque2">¿Quién se queda con el PRIMER territorio?</label>
  <select id="select-propietario-ataque2">
    <option value="">-- Elige casa --</option>
  </select>
</div>


  </div>

  <!-- Botones -->
  <div class="botones-modal" style="margin-top: 20px;">
    <button class="btn-confirmar" onclick="confirmarAtaqueSimple()">✔️ Confirmar</button>
    <button class="btn-cancelar" onclick="cerrarModal('modal-ataque-simple')">✖️ Cancelar</button>
  </div>
</div>

  
<div id="modal-revuelta-tyrell" class="modal-juego" style="display: none;">
  <h2>🌾 Revuelta Campesina</h2>
  <label>¿A qué casa inicias la revuelta?</label>
  <select id="select-casa-revuelta"></select>

  <label>¿Cuántas tropas ganas?</label>
  <input type="number" id="input-tropas-revuelta" min="1" value="1" />

  <div class="botones-modal">
    <button id="btn-confirmar-revuelta-tyrell" class="btn-confirmar">✔️ Confirmar</button>
    <button id="btn-cancelar-revuelta-tyrell">Cancelar</button>
  </div>
</div>

<div id="modal-perdidas-revuelta" class="modal-juego" style="display: none;">
  <h2>⚠️ Has sido víctima de una revuelta</h2>
  <div id="lista-perdidas-revuelta"></div>
  <h3>¿Qué territorios pierdes?</h3>
  <div id="lista-territorios-checkbox"></div>
  <button onclick="confirmarPerdidasRevuelta()">✔️ Confirmar pérdidas</button>
</div>


<div id="modal-territorios-revuelta" class="modal-juego" style="display: none;">
  <h2>🌾 ¿Qué territorios le quitas?</h2>
  <div id="lista-territorios-revuelta" class="lista-checkbox"></div>

  <div class="botones-modal">
    <button id="btn-confirmar-territorios-revuelta" class="btn-confirmar">✔️ Confirmar</button>
    <button onclick="cerrarModal('modal-territorios-revuelta')" class="btn-cancelar">Cancelar</button>
  </div>
</div>




    <!-- Modal Organizar Torneo -->
<div id="modal-torneo-arryn" class="modal-juego" style="display: none; z-index: 99999;">
  <h2>🏇 Organizar Torneo</h2>
  <p>¿Cuántos caballeros deseas ganar?</p>
  <input type="number" id="input-caballeros-torneo" min="1" value="1" style="width: 100%; margin-top: 10px;">
  <div class="botones-modal" style="margin-top: 20px;">
    <button id="btn-confirmar-torneo" class="btn-confirmar">✔️ Confirmar</button>
    <button class="btn-cancelar" onclick="cerrarModal('modal-torneo-arryn')">✖️ Cancelar</button>
  </div>
</div>

<div id="modal-caballero-batalla-arryn" class="modal-juego" style="display: none; z-index: 99999;">
  <h2>🛡️ ¿Ganas un caballero?</h2>
  <p>¿Deseas añadir un caballero a tus tropas?</p>
  <div class="botones-modal" style="margin-top: 20px;">
    <button onclick="confirmarCaballeroArryn(true)" class="btn-confirmar">✔️ Sí</button>
    <button onclick="confirmarCaballeroArryn(false)" class="btn-cancelar">✖️ No</button>
  </div>
</div>




    <!-- Modal Reclutar (NUEVO) -->
<div id="modal-reclutar" class="modal-juego" style="display: none;">
    <button class="modal-cerrar" onclick="cerrarModal('modal-reclutar')">X</button>
    <h2>Reclutar Tropas</h2>
    <div id="contenedor-reclutas" style="display: flex; justify-content: space-around; gap: 10px; flex-wrap: wrap;">
      
      <!-- Soldado -->
      <div class="recluta-box" data-tipo="soldado" data-costo="4">
        <h3>Soldado</h3>
        <img src="../imgs/reclutas/soldado.png" alt="Soldado" style="width: 80px;">
        <div class="control-numero">
          <button onclick="ajustarCantidad('soldado', -1)">-</button>
          <span id="cantidad-soldado">0</span>
          <button onclick="ajustarCantidad('soldado', 1)">+</button>
        </div>
        <p>Coste: 4 oro</p>
      </div>
  
      <!-- Mercenario -->
      <div class="recluta-box" data-tipo="mercenario" data-costo="5">
        <h3>Mercenario</h3>
        <img src="../imgs/reclutas/mercenario.png" alt="Mercenario" style="width: 80px;">
        <div class="control-numero">
          <button onclick="ajustarCantidad('mercenario', -1)">-</button>
          <span id="cantidad-mercenario">0</span>
          <button onclick="ajustarCantidad('mercenario', 1)">+</button>
        </div>
        <p>Coste: 5 oro</p>
      </div>
  
      <!-- Mercenario de élite -->
      <div class="recluta-box" data-tipo="elite" data-costo="7">
        <h3>Mercenario de élite</h3>
        <img src="../imgs/reclutas/elite.png" alt="Mercenario élite" style="width: 80px;">
        <div class="control-numero">
          <button onclick="ajustarCantidad('elite', -1)">-</button>
          <span id="cantidad-elite">0</span>
          <button onclick="ajustarCantidad('elite', 1)">+</button>
        </div>
        <p>Coste: 7 oro</p>
      </div>

    </div>
  
    <div style="margin-top: 20px; text-align: center;">
      <p>Total de oro requerido: <span id="costo-total-recluta">0</span> <img src="../imgs/Interfaz/oro.png" alt="oro" class="icono-inline"></p>
      <button class="btn-confirmar" onclick="confirmarReclutamiento()">✔️ Reclutar</button>
      <button class="btn-cancelar" onclick="cerrarModal('modal-reclutar')">✖️ Cancelar</button>
      <p id="mensaje-reclutamiento" style="color: red; margin-top: 10px;"></p>
    </div>
  </div>
    <!-- Fin Modal Reclutar -->

     <!-- Modal Construir (Sin cambios estructurales) -->
    <div id="modal-construir" class="modal-juego" style="display: none;">
        <button class="modal-cerrar" onclick="cerrarModal('modal-construir')">X</button>
        <h2>Construir Edificio</h2>
        <div class="campo-formulario">
            <label for="select-territorio-construir">Construir en:</label>
            <select id="select-territorio-construir"><option value="">-- Selecciona territorio --</option></select>
        </div>
        <div class="campo-formulario">
            <label for="select-edificio-construir">Tipo de Edificio:</label>
            <select id="select-edificio-construir">
                <option value="">-- Selecciona --</option>
                <optgroup label="Producción">
                    <option value="Granja">Granja</option>
                    <option value="Cantera">Cantera</option>
                    <option value="Mina">Mina</option>
                    <option value="Aserradero">Aserradero</option>
                </optgroup>
                 <optgroup label="Militar">
                    <option value="Castillo">Castillo</option>
                    <option value="Puerto">Puerto</option>
                    <option value="Taller de maquinaria de asedio">Taller de Asedio</option>
                    <option value="Atalayas">Atalayas</option>
                    <option value="Academia de Caballería">Academia de Caballería</option>
                 </optgroup>
            </select>
        </div>
        <div id="contenedor-construccion-extra" class="campo-formulario" style="display: none;">
  <label for="select-territorio-construir-2">Segundo territorio:</label>
  <select id="select-territorio-construir-2"><option value="">-- Selecciona territorio --</option></select>

  <label for="select-edificio-construir-2">Segundo edificio:</label>
  <select id="select-edificio-construir-2">
    <option value="">-- Selecciona --</option>
  </select>
</div>

        <div class="botones-modal">
          <div id="costo-construccion" style="text-align: center; margin-top: 15px; font-weight: bold;">
            Costo: <span id="costo-construir-valor">--</span> <img src="../imgs/Interfaz/oro.png" alt="oro" class="icono-inline">
        </div>
         <div id="limite-construccion-info" style="text-align: center; margin-top: 5px; font-size: 0.9em; color: #ccc;">
             (<span id="limite-construir-actual">0</span> / <span id="limite-construir-maximo">1</span> edificios este turno)
        </div>
             <button id="btn-confirmar-construir" class="btn-confirmar">✔️ Construir</button>
             <button class="btn-cancelar" onclick="cerrarModal('modal-construir')">✖️ Cancelar</button>
        </div>
    </div>
    <!-- Fin Modal Construir -->
     

    <!-- Modal Elección Máquina de Asedio -->
<div id="modal-elegir-asedio" class="modal-juego" style="display: none;">
  <h2>Elige una máquina de asedio</h2>
  <div style="display: flex; gap: 20px; justify-content: center;">
    <div onclick="elegirAsedioGratis('catapulta')" style="cursor: pointer; text-align: center;">
      <img src="../imgs/reclutas/catapulta.png" style="width: 80px;">
      <p>Catapulta</p>
    </div>
    <div onclick="elegirAsedioGratis('torre')" style="cursor: pointer; text-align: center;">
      <img src="../imgs/reclutas/torre.png" style="width: 80px;">
      <p>Torre</p>
    </div>
    <div onclick="elegirAsedioGratis('escorpion')" style="cursor: pointer; text-align: center;">
      <img src="../imgs/reclutas/escorpion.png" style="width: 80px;">
      <p>Escorpión</p>
    </div>
  </div>
</div>

<!-- Modal de Ingresos -->
<div id="modal-ingresos" class="modal-juego" style="display: none;">
  <button class="modal-cerrar" onclick="cerrarModal('modal-ingresos')">X</button>
  <h2>💰 Información de Oro</h2>
  <p id="oroEstimadoTexto">Oro estimado al final del turno: 0 oro</p>
  <p id="ingresosPorTerritorioTexto">Ingresos por territorios: 0 oro</p>
  <div class="botones-modal">
    <button class="boton-dorado" onclick="abrirModal('modal-ofrecer-oro')">Ofrecer oro</button>
  </div>
</div>

<!-- Modal Ofrecer Oro -->
<div id="modal-ofrecer-oro" class="modal-juego" style="display: none;">
  <button class="modal-cerrar" onclick="cerrarModal('modal-ofrecer-oro')">X</button>
  <h2>🤝 Transferir Oro</h2>

  <div class="campo-formulario">
    <label for="casaDestino">Elige la casa destinataria:</label>
    <select id="casaDestino"><option value="">-- Selecciona casa --</option></select>
  </div>

  <div class="campo-formulario">
    <label for="cantidadOro">Cantidad de oro a transferir:</label>
    <input type="number" id="cantidadOro" min="1" value="1" />
  </div>

  <div class="botones-modal">
    <button class="btn-confirmar" onclick="confirmarTransferenciaOro()">✔️ Transferir</button>
    <button class="btn-cancelar" onclick="cerrarModal('modal-ofrecer-oro')">✖️ Cancelar</button>
  </div>
</div>


    


    <!-- Modal Mis Territorios (Sin cambios estructurales) -->
    <div id="modal-mis-territorios" class="modal-juego" style="display: none;">
        <button id="btn-cerrar-modal-territorios" class="modal-cerrar">X</button>
        <h2>Mis Territorios (<span id="contador-territorios">0</span>)</h2>
        <p>Oro estimado al final del turno: <span id="oro-estimado-final-turno">0</span> <img src="../imgs/Interfaz/oro.png" alt="oro" class="icono-inline"></p>
        <p>Ingresos por territorios: <span id="oro-generado-territorios">0</span> <img src="../imgs/Interfaz/oro.png" alt="oro" class="icono-inline"></p>
        <div class="lista-scrollable">
            <ul id="lista-mis-territorios"><li>Cargando...</li></ul>
        </div>
         <div class="botones-modal">
             <button id="btn-ok-modal-territorios" class="btn-confirmar">OK</button>
        </div>
    </div>
    <!-- Fin Modal Mis Territorios -->

<!-- Modal: ¿Has conseguido un rumor? -->
<div id="modal-ganar-rumor" class="modal-juego" style="display: none;">
  <h2>🕵️ ¿Has conseguido un rumor?</h2>
  <div class="botones-modal">
    <button class="btn-confirmar" onclick="confirmarGanarRumor(true)">✔️ Sí</button>
    <button class="btn-cancelar" onclick="confirmarGanarRumor(false)">✖️ No</button>
  </div>
</div>

<!-- Modal: Elegir rumor -->
<div id="modal-elegir-rumor" class="modal-juego" style="display: none;">
  <h2>📜 ¿Qué rumor conseguiste?</h2>
  <div class="campo-formulario">
    <label for="select-rumor">Selecciona uno:</label>
    <select id="select-rumor"></select>
  </div>
  <div class="botones-modal">
    <button class="btn-confirmar" onclick="confirmarRumorElegido()">✔️ Confirmar</button>
  </div>
</div>

<!-- Modal Reclutar Huargos -->
<div id="modal-reclutar-huargos" class="modal-juego" style="display: none;">
  <h2>🐺 Reclutar Huargos</h2>
  <div class="campo-formulario">
    <label for="cantidad-huargos">¿Cuántos Huargos quieres reclutar?</label>
    <input type="number" id="cantidad-huargos" min="1" value="1" />
  </div>
  <div class="botones-modal">
    <button class="btn-confirmar" onclick="confirmarReclutarHuargos()">✔️ Confirmar</button>
  </div>
</div>

<!-- Modal Reclutar Unicornios -->
<div id="modal-reclutar-unicornios" class="modal-juego" style="display: none;">
  <h2>🦄 Reclutar Unicornios</h2>
  <div class="campo-formulario">
    <label for="cantidad-unicornios">¿Cuántos Unicornios quieres reclutar?</label>
    <input type="number" id="cantidad-unicornios" min="1" value="1" />
  </div>
  <div class="botones-modal">
    <button class="btn-confirmar" onclick="confirmarReclutarUnicornios()">✔️ Confirmar</button>
  </div>
</div>

<!-- Modal Reclutar Murciélagos -->
<div id="modal-reclutar-murcielagos" class="modal-juego" style="display: none;">
  <h2>🦇 Reclutar Murciélagos</h2>
  <div class="campo-formulario">
    <label for="cantidad-murcielagos">¿Cuántos Murciélagos quieres reclutar?</label>
    <input type="number" id="cantidad-murcielagos" min="1" value="1" />
  </div>
  <div class="botones-modal">
    <button class="btn-confirmar" onclick="confirmarReclutarMurcielagos()">✔️ Confirmar</button>
  </div>
</div>

<!-- Modal Reclutar Caballeros (Tully) -->
<div id="modal-reclutar-caballeros-tully" class="modal-juego" style="display: none;">
  <h2>⚔️ Reclutar Caballeros</h2>
  <div class="campo-formulario">
    <label for="cantidad-caballeros-tully">¿Cuántos Caballeros quieres reclutar?</label>
    <input type="number" id="cantidad-caballeros-tully" min="1" value="1" />
  </div>
  <div class="botones-modal">
    <button class="btn-confirmar" onclick="confirmarReclutarCaballerosTully()">✔️ Confirmar</button>
  </div>
</div>

<!-- Modal Reclutar Guardia Real -->
<div id="modal-reclutar-guardiareal" class="modal-juego" style="display: none;">
  <h2>🛡️ Reclutar Guardia Real</h2>
  <div class="campo-formulario">
    <label for="cantidad-guardiareal">¿Cuántos miembros de la Guardia Real quieres reclutar?</label>
    <input type="number" id="cantidad-guardiareal" min="1" value="1" />
  </div>
  <div class="botones-modal">
    <button class="btn-confirmar" onclick="confirmarReclutarGuardiaReal()">✔️ Confirmar</button>
  </div>
</div>

<!-- Modal Reclutar Tritones -->
<div id="modal-reclutar-tritones" class="modal-juego" style="display: none;">
  <h2>🧜‍♂️ Reclutar tritones</h2>
  <div class="campo-formulario">
    <label for="cantidad-tritones">¿Cuántos Tritones se te unen a tu flota?</label>
    <input type="number" id="cantidad-tritones" min="1" value="1" />
  </div>
  <div class="botones-modal">
    <button class="btn-confirmar" onclick="confirmarReclutarTritones()">✔️ Confirmar</button>
  </div>
</div>


<!-- Modal Reclutar Barco Legendario -->
<div id="modal-reclutar-barcolegendario" class="modal-juego" style="display: none;">
  <h2>🚢 Barco Legendario</h2>
  <div class="campo-formulario">
    <label for="cantidad-barcolegendario">¿Cuántas tropas lleva tu Barco Legendario?</label>
    <input type="number" id="cantidad-barcolegendario" min="1" value="1" />
  </div>
  <div class="botones-modal">
    <button class="btn-confirmar" onclick="confirmarReclutarBarcoLegendario()">✔️ Confirmar</button>
  </div>
</div>

<!-- Modal Reclutar Venados Blancos -->
<div id="modal-reclutar-venadosblancos" class="modal-juego" style="display: none;">
  <h2>🦌 Reclutar Venados Blancos</h2>
  <div class="campo-formulario">
    <label for="cantidad-venadosblancos">¿Cuántos Venados Blancos quieres reclutar?</label>
    <input type="number" id="cantidad-venadosblancos" min="1" value="1" />
  </div>
  <div class="botones-modal">
    <button class="btn-confirmar" onclick="confirmarReclutarVenadosBlancos()">✔️ Confirmar</button>
  </div>
</div>

<!-- Modal Reclutar Martilladores -->
<div id="modal-reclutar-martilladores" class="modal-juego" style="display: none;">
  <h2>🔨 Reclutar Martilladores</h2>
  <div class="campo-formulario">
    <label for="cantidad-martilladores">¿Cuántos Martilladores quieres reclutar?</label>
    <input type="number" id="cantidad-martilladores" min="1" value="1" />
  </div>
  <div class="botones-modal">
    <button class="btn-confirmar" onclick="confirmarReclutarMartilladores()">✔️ Confirmar</button>
  </div>
</div>

<!-- Modal Reclutar Caballeros de la rosa -->
<div id="modal-reclutar-caballerosdelarosa" class="modal-juego" style="display: none;">
  <h2>🌹 Reclutar Caballeros de la rosa</h2>
  <div class="campo-formulario">
    <label for="cantidad-caballerosdelarosa">¿Cuántos Caballeros de la Rosa quieres reclutar?</label>
    <input type="number" id="cantidad-caballerosdelarosa" min="1" value="1" />
  </div>
  <div class="botones-modal">
    <button class="btn-confirmar" onclick="confirmarReclutarCaballerosDeLaRosa()">✔️ Confirmar</button>
  </div>
</div>

<!-- Modal Reclutar Guardia del Alba-->
<div id="modal-reclutar-guardiadelalba" class="modal-juego" style="display: none;">
  <h2>⛨ Reclutar Guardia del Alba</h2>
  <div class="campo-formulario">
    <label for="cantidad-guardiadelalba">¿Cuántos Guardias del Alba quieres reclutar?</label>
    <input type="number" id="cantidad-guardiadelalba" min="1" value="1" />
  </div>
  <div class="botones-modal">
    <button class="btn-confirmar" onclick="confirmarReclutarGuardiaDelAlba()">✔️ Confirmar</button>
  </div>
</div>

<!-- Modal Reclutar Barbaros-->
<div id="modal-reclutar-barbaros" class="modal-juego" style="display: none;">
  <h2>⛨ Reclutar Barbaros</h2>
  <div class="campo-formulario">
    <label for="cantidad-barbaros">¿Cuántos Barbaros quieres reclutar?</label>
    <input type="number" id="cantidad-barbaros" min="1" value="1" />
  </div>
  <div class="botones-modal">
    <button class="btn-confirmar" onclick="confirmarReclutarBarbaros()">✔️ Confirmar</button>
  </div>
</div>

<!-- Modal Reclutar Caballeros del Aguila-->
<div id="modal-reclutar-caballerosdelaguila" class="modal-juego" style="display: none;">
  <h2>⛨ Reclutar Caballeros del Aguila</h2>
  <div class="campo-formulario">
    <label for="cantidad-caballerosdelaguila">¿Cuántos Caballeros del Aguila quieres reclutar?</label>
    <input type="number" id="cantidad-caballerosdelaguila" min="1" value="1" />
  </div>
  <div class="botones-modal">
    <button class="btn-confirmar" onclick="confirmarReclutarCaballerosDelAguila()">✔️ Confirmar</button>
  </div>
</div>


<div id="modal-reemplazar-jinete" class="modal-juego" style="display: none;">
  <h2>🐴 Jinete perdido</h2>
  <p>¿Deseas colocar otro jinete en su lugar?</p>
  <div class="botones-modal">
    <button onclick="confirmarReemplazoJinete(true)" class="btn-confirmar">✔️ Sí</button>
    <button onclick="confirmarReemplazoJinete(false)" class="btn-cancelar">✖️ No</button>
  </div>
</div>

<!-- Modal Robar Tropas por Moral (Martell + El Portador del Alba + Guardia del Alba) -->
<div id="modal-robar-tropas-moral" class="modal-juego" style="display: none;">
  <h2>⛨ Robar tropas por moral</h2>
  <p>Has inspirado terror gracias a la Guardia del Alba. Robas tropas del enemigo.</p>

  <div class="campo-formulario">
    <label for="input-cantidad-robo-tropas">¿Cuántas tropas normales robas?</label>
    <input type="number" id="input-cantidad-robo-tropas" min="1" value="1" style="width: 100%;">
  </div>

  <div class="campo-formulario">
    <label for="select-casa-robo-tropas">¿A qué casa se las robas?</label>
    <select id="select-casa-robo-tropas">
      <option value="">-- Selecciona casa --</option>
    </select>
  </div>

  <div class="botones-modal">
    <button id="btn-confirmar-robo-tropas" class="btn-confirmar">✔️ Robar</button>
    <button onclick="cerrarModal('modal-robar-tropas-moral')" class="btn-cancelar">✖️ Cancelar</button>
  </div>
</div>




<div id="modal-barco-perdido-transferencia" class="modal-juego" style="display: none;">
  <h2>🚢 Barco Perdido</h2>
  <p>¿Quién se queda con este barco?</p>
  <select id="select-casa-barco">
    <option value="">-- Nadie (se pierde) --</option>
  </select>
  <div class="botones-modal">
    <button onclick="confirmarTransferenciaBarco()">✔️ Confirmar</button>
  </div>
</div>







    <!-- Modal para elegir recursos iniciales -->
<div id="modal-inicial" class="modal-juego" style="display: none; z-index: 9999; backdrop-filter: blur(2px);">
    <h2>⚙️ Configura tus recursos iniciales</h2>
  
    <div class="campo-formulario">
      <label for="input-oro-inicial">💰 Oro Extra:</label>
      <input type="number" id="input-oro-inicial" min="0" value="50" style="width: 100%;">
    </div>
  
    <div class="campo-formulario">
      <label for="input-tropas-iniciales">🛡️ Tropas iniciales:</label>
      <input type="number" id="input-tropas-iniciales" min="0" value="30" style="width: 100%;">
    </div>

    <div class="campo-formulario">
      <label for="select-rumor-inicial">📜 Rumor inicial:</label>
      <select id="select-rumor-inicial">
        <option value="">-- Ninguno --</option>
      </select>
    </div>

  
    <div class="botones-modal" style="margin-top: 20px;">
      <button id="btn-confirmar-iniciales" class="btn-confirmar" style="width: 100%;">
        ✔️ Confirmar
      </button>
    </div>
  </div>

<!-- Modal Fase Neutral -->
<div id="modal-fase-neutral" class="modal-juego" style="display: none;">
  <!-- Paso 1: Pérdidas por unidad -->
  <div id="fase-neutral-paso1">
    <h2>¿Qué unidades perdiste?</h2>
    <div id="lista-perdidas-por-unidad" class="lista-scrollable" style="max-height: 300px; overflow-y: auto; margin-bottom: 15px;">
      <!-- Aquí se rellenará dinámicamente -->
    </div>
    <button id="btn-confirmar-perdidas-neutral">✔️ Confirmar</button>
  </div>


  <!-- Paso 2: ¿Perdiste territorios? -->
  <div id="fase-neutral-paso2" style="display:none;">
    <h2>¿Perdiste territorios?</h2>
    <button id="btn-si-perdi-territorios">Sí</button>
    <button id="btn-no-perdi-territorios">No</button>
  </div>

  <!-- Paso 3: Elegir territorios perdidos -->
  <div id="fase-neutral-paso3" style="display:none;">
    <h3>Selecciona los territorios que perdiste</h3>
    <div id="lista-territorios-perdidos" class="lista-scrollable"></div>

    <button id="btn-confirmar-territorios-perdidos">✔️ Confirmar territorios</button>
  </div>

  <!-- Paso 4: Nuevo propietario por cada territorio -->
  <div id="fase-neutral-paso4" style="display:none;">
    <div id="contenedor-cambios-propietario"></div>
    <button id="btn-finalizar-fase-neutral">Finalizar</button>
  </div>
</div>

  <div id="modal-lannister-perdidas" class="modal-juego" style="display: none;">
  <h2>🩸 ¿Qué unidades perdiste al cobrar impuestos?</h2>
  <p>Indica cuántas unidades militares has perdido:</p>

  <div id="lista-perdidas-lannister" class="lista-scrollable" style="max-height: 300px; overflow-y: auto; margin-bottom: 15px;">
    <!-- Aquí se insertarán los inputs -->
  </div>

  <div class="botones-modal">
    <button id="btn-confirmar-perdidas-impuestos" class="btn-confirmar">✔️ Confirmar</button>
  </div>
</div>


  <div id="modal-soborno-lannister" class="modal-juego" style="display: none;">
    <h2>🪙 Sobornar Soldados</h2>
  
    <div class="campo-formulario">
      <label for="select-territorio-soborno">¿Dónde sobornas?</label>
      <select id="select-territorio-soborno"><option value="">-- Selecciona --</option></select>
    </div>
  
    <div class="campo-formulario">
      <label for="input-cantidad-soborno">¿Cuántos soldados sobornas?</label>
      <input type="number" id="input-cantidad-soborno" min="1" value="1" style="width: 100%;">
    </div>
    <p id="mensaje-soborno-insuficiente" style="color: red; font-size: 0.9em; display: none; margin-top: 5px;">⚠️ Oro insuficiente</p>

  
    <div class="botones-modal">
      <button id="btn-confirmar-soborno" class="btn-confirmar">✔️ Confirmar</button>
    </div>
  </div>

  <div id="modal-soborno-final-lannister" class="modal-juego" style="display: none;">
    <h2>🩸 Resultado del Soborno</h2>
    <label for="input-tropas-perdidas-soborno-lannister">¿Cuántas tropas perdiste?</label>
    <input type="number" id="input-tropas-perdidas-soborno-lannister" min="0" value="0" style="width: 100%; margin-bottom: 10px;">
    <label>¿Ganaste el territorio?</label>
    <div style="margin-top: 5px;">
      <label><input type="radio" name="soborno-resultado" value="si" checked> Sí</label>
      <label><input type="radio" name="soborno-resultado" value="no"> No</label>
    </div>
    <div class="botones-modal" style="margin-top: 15px;">
      <button id="btn-confirmar-soborno-final-lannister" class="btn-confirmar">✔️ Confirmar</button>
    </div>
  </div>

  <div id="modal-soborno-final-defensor" class="modal-juego" style="display: none;">
    <h2>🩸 Has sido sobornado</h2>
    <label for="input-tropas-perdidas-soborno-defensor">¿Cuántas tropas perdiste?</label>
    <input type="number" id="input-tropas-perdidas-soborno-defensor" min="0" value="0" style="width: 100%; margin-bottom: 10px;">
    <div class="botones-modal" style="margin-top: 15px;">
      <button id="btn-confirmar-soborno-defensor" class="btn-confirmar">✔️ Confirmar</button>
    </div>
  </div>
  
  <div id="modal-militantes-fe" class="modal-juego" style="display: none;">
    <h2>✝️ Militantes de la Fe</h2>
    <p>Tienes un Septo. ¿Cuántos militantes de la fe deseas recibir?</p>
    <input type="number" id="input-militantes-fe" min="1" value="1" style="width: 100%; margin-top: 10px;">
    <div class="botones-modal" style="margin-top: 20px;">
      <button onclick="confirmarMilitantesFe()" class="btn-confirmar">✔️ Confirmar</button>
    </div>
  </div>

  <button id="btn-casarse-targaryen" class="btn-accion-juego" style="display: none;">💍 Casarse</button>

  <div id="modal-casarse-targaryen" class="modal-juego" style="display: none;">
  <h2>💍 Matrimonio Targaryen</h2>
  <p>¿Con qué casa deseas casarte?</p>
  <select id="select-casa-matrimonio">
    <option value="">-- Elige casa --</option>
    <option value="Velaryon">Casa Velaryon</option>
    <option value="Qoherys">Casa Qoherys</option>
    <option value="Celtigar">Casa Celtigar</option>
  </select>
  <div class="botones-modal" style="margin-top: 20px;">
    <button id="btn-confirmar-casamiento" class="btn-confirmar">✔️ Casarse</button>
    <button class="btn-cancelar" onclick="cerrarModal('modal-casarse-targaryen')">✖️ Cancelar</button>
  </div>
</div>

<div id="modal-casarse-alianza" class="modal-juego" style="display: none;">
  <h2>💍 Alianza de Sangre</h2>
  <p>Has desbloqueado el rumor. Elige una casa para casarte:</p>
  <select id="select-casa-matrimonio-alianza">
    <option value="">-- Elige casa --</option>
    <option value="Velaryon">Casa Velaryon</option>
    <option value="Qoherys">Casa Qoherys</option>
    <option value="Celtigar">Casa Celtigar</option>
  </select>
  <div class="botones-modal" style="margin-top: 20px;">
    <button id="btn-confirmar-casamiento-alianza" class="btn-confirmar">✔️ Confirmar</button>
    <button class="btn-cancelar" onclick="cerrarModal('modal-casarse-alianza')">✖️ Cancelar</button>
  </div>
</div>



  <!-- Botón solo para Tyrrell -->
<button id="btn-obtener-tecnologia" class="btn-accion-juego" style="display: none;">🔧 Obtener Tecnología</button>

<!-- Modal Pregunta Tecnología Tyrell -->
<div id="modal-pregunta-tecnologia" class="modal-juego" style="display: none;">
  <h2>¿Has conseguido tecnología?</h2>
  <div class="botones-modal" style="margin-top: 20px;">
    <button id="btn-si-tecnologia" class="btn-confirmar">✔️ Sí</button>
    <button id="btn-no-tecnologia" class="btn-cancelar">✖️ No</button>
  </div>
</div>

<!-- Modal para elegir tecnología -->
<div id="modal-tecnologia-trirren" class="modal-juego" style="display: none;">
  <h2>📚 Obtener Tecnología</h2>
  <p>¿Qué tecnología quieres construir?</p>

  <div class="campo-formulario">
    <label for="select-edificio-tecnologia">Tecnología:</label>
    <select id="select-edificio-tecnologia">
      <option value="">-- Selecciona --</option>
      <option value="Armería">Armería de los Lannister</option>
      <option value="Arquería">Arquería de los Tully</option>
      <option value="Academia de Caballería">Academia de Caballería de los Arryn</option>
    </select>
  </div>

  <div class="campo-formulario">
    <label for="select-territorio-tecnologia">¿Dónde construirla?</label>
    <select id="select-territorio-tecnologia"></select>
  </div>

  <div class="botones-modal">
    <button id="btn-confirmar-tecnologia" class="btn-confirmar">✔️ Confirmar</button>
    <button class="btn-cancelar" onclick="cerrarModal('modal-tecnologia-trirren')">✖️ Cancelar</button>
  </div>
</div>

  
<!-- Modal de Pérdidas por Batalla -->
<div id="modal-perdidas-ataque" class="modal-juego" style="display: none;">
  <h2>🩸 Indica tus pérdidas</h2>
  <p>Selecciona cuántas unidades perdiste en la batalla:</p>

  <div id="lista-perdidas-ataque" class="lista-scrollable" style="max-height: 300px; overflow-y: auto; margin-bottom: 15px;">
    <!-- Aquí se insertarán los inputs dinámicamente -->
  </div>

  <div class="botones-modal">
    <button id="btn-confirmar-perdidas-ataque" class="btn-confirmar">✔️ Confirmar</button>
  </div>
</div>

<div id="modal-refuerzos-tully" class="modal-juego" style="display: none;">
  <h2>🏹 Refuerzos Tully</h2>
  <p>¿Se te unen 3 caballeros y 1 arquero como refuerzos?</p>
  <div class="botones-modal">
    <button onclick="confirmarRefuerzosTully(true)" class="btn-confirmar">✔️ Sí</button>
    <button onclick="confirmarRefuerzosTully(false)" class="btn-cancelar">✖️ No</button>
  </div>
</div>


<div id="modal-asignar-territorios" class="modal-juego" style="display: none;">
  <h2>🏰 Asignar territorios conquistados</h2>
  <div id="lista-territorios-asignar" class="lista-scrollable" style="max-height: 300px; overflow-y: auto;">
    <!-- Aquí se generará dinámicamente cada territorio con su selección de victoria y nuevo dueño -->
  </div>
  <button id="btn-confirmar-asignacion-territorios" class="btn-confirmar">✔️ Confirmar</button>
</div>


  <!-- Modal para defensores: ¿Has perdido tropas? -->
<div id="modal-perdidas-defensor" class="modal-juego" style="display: none;">
  <h2>🩸 ¿Perdiste tropas en la batalla?</h2>
  <p>Indica cuántas tropas has perdido de cada tipo:</p>

  <div id="lista-perdidas-defensor" class="lista-scrollable" style="max-height: 300px; overflow-y: auto; margin-bottom: 15px;">
    <!-- Se rellenará con inputs dinámicos -->
  </div>

  <div class="botones-modal">
    <button id="btn-confirmar-perdidas-defensor" class="btn-confirmar">✔️ Confirmar</button>
  </div>
</div>



<!-- Modal Hijos Targaryen -->
<div id="modal-hijos-targaryen" class="modal-juego" style="display: none;">
  <h2>👶 ¿Has tenido un hijo?</h2>
  <div class="botones-modal">
    <button id="btn-hijo-si" class="btn-confirmar">✔️ Sí</button>
    <button id="btn-hijo-no" class="btn-cancelar">✖️ No</button>
  </div>
</div>

<!-- Modal Eclosión Huevos -->
<div id="modal-eclosion-huevo" class="modal-juego" style="display: none;">
  <h2>🐣 ¿Ha eclosionado este huevo?</h2>
  <p id="texto-eclosion-huevo">Huevo X</p>
  <div class="botones-modal">
    <button id="btn-eclosion-si" class="btn-confirmar">✔️ Sí</button>
    <button id="btn-eclosion-no" class="btn-cancelar">✖️ No</button>
  </div>
</div>

<div id="modal-levas-stark" class="modal-juego" style="display: none;">
  <h2>🛡️ Levantamiento de Levas</h2>
  <p>¿Cuántas tropas (soldados normales) ganas?</p>
  <input type="number" id="input-levas-stark" min="1" value="1" style="width: 100%; margin-top: 10px;">
  <div class="botones-modal" style="margin-top: 20px;">
    <button id="btn-confirmar-levas-stark" class="btn-confirmar">✔️ Confirmar</button>
    <button class="btn-cancelar" onclick="cerrarModal('modal-levas-stark')">✖️ Cancelar</button>
  </div>
</div>

<div id="modal-saqueo-greyjoy" class="modal-juego" style="display: none;">
  <h2>⚓ Saqueo</h2>
  <p>¿Cuánto oro ganaste al saquear?</p>
  <input type="number" id="input-oro-saqueo" min="1" value="10" style="width: 100%; margin-top: 10px;">
  <div class="botones-modal" style="margin-top: 20px;">
    <button id="btn-confirmar-saqueo" class="btn-confirmar">✔️ Confirmar</button>
    <button class="btn-cancelar" onclick="cerrarModal('modal-saqueo-greyjoy')">✖️ Cancelar</button>
  </div>
</div>

<div id="modal-ritual-kraken" class="modal-juego" style="display: none;">
  <h2>🐙 ¿Has conseguido al Kraken?</h2>
  <div class="botones-modal">
    <button id="btn-si-ritual-kraken" class="btn-confirmar">✔️ Sí</button>
    <button id="btn-no-ritual-kraken" class="btn-cancelar">✖️ No</button>
  </div>
</div>



</div>
  
  
  
  <script defer src="../javascript/scriptjuego.js"></script>
</body>
</html>