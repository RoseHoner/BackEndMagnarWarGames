<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Magnar WarGames - Juego</title> <!-- T√≠tulo m√°s descriptivo -->
  <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
  <link rel="stylesheet" href="../css/stylejuego.css">
</head>
<body>
    <!-- BARRA SUPERIOR (Sin cambios) -->
    <div id="top-bar">
        <div id="logo-casa-container">
             <img id="logo-casa" src="" alt="Logo de casa">
        </div>
        <div id="tropas-jugador" style="display: none;">
            <img src="../imgs/Interfaz/tropas.png" alt="Tropas">
            <span id="cantidad-tropas">0</span>
        </div>
        <div id="oro-jugador" style="display: none;">
            <img src="../imgs/Interfaz/oro.png" alt="Oro">
            <span id="cantidad-oro">0</span>
        </div>
    </div>

    <!-- Info Turno/Acci√≥n (Sin cambios) -->
    <div id="turno-jugador" class="turno-texto">Turno 1</div>
    <div id="accion-jugador" class="accion-texto">Acci√≥n 1</div>
    <div id="estado-turno"></div>

    <!-- CONTENEDOR BOTONES ACCI√ìN (Sin cambios estructurales) -->
    <div id="acciones-container">
        <button id="btn-batalla" class="btn-accion-juego">‚öîÔ∏è Batalla</button>
        <button id="btn-reclutar" class="btn-accion-juego">‚ûï Reclutar</button>
        <button id="btn-construir" class="btn-accion-juego">üî® Construir</button>
        <button id="btn-mover" class="btn-accion-juego">‚û°Ô∏è Mover</button>
        <button id="btn-reorganizar" class="btn-accion-juego">üîÑ Reorganizar</button>
        <!-- Podr√≠amos a√±adir botones para habilidades espec√≠ficas aqu√≠ -->
    </div>

    <!-- Bot√≥n Principal "Siguiente Acci√≥n" (Sin cambios) -->
    <button id="boton-accion" style="display: none;">
        ‚úÖ Terminar Acci√≥n
    </button>

    <!-- ****** ELIMINADOS MODALES INICIALES ORO/TROPAS ****** -->
    <!-- El servidor asignar√° los valores iniciales -->

    <!-- Modal Batalla (Sin cambios estructurales, IDs verificados) -->
    <div id="modal-batalla" class="modal-juego" style="display: none;">
        <button id="btn-cerrar-modal-batalla" class="modal-cerrar">X</button>
        <h2>Resultado de Batalla</h2>
        <div class="campo-formulario">
            <label for="select-territorio-atacado">Territorio Atacado:</label>
            <select id="select-territorio-atacado"><option value="">-- Selecciona --</option></select>
        </div>
        <div class="campo-formulario">
            <fieldset><legend>Resultado:</legend>
                <label><input type="radio" name="resultado-batalla" value="victoria" checked> Victoria</label>
                <label><input type="radio" name="resultado-batalla" value="derrota"> Derrota</label>
            </fieldset>
        </div>
        <div class="campo-formulario campo-perdidas">
            <label for="input-perdidas-atacante">Mis P√©rdidas:</label>
            <div class="control-numero">
                <button id="btn-restar-perdidas-atacante">-</button>
                <input type="number" id="input-perdidas-atacante" value="0" min="0">
                <button id="btn-sumar-perdidas-atacante">+</button>
            </div>
        </div>
        <div class="campo-formulario campo-perdidas">
            <label for="input-perdidas-defensor">P√©rdidas Defensor:</label>
            <div class="control-numero">
                <button id="btn-restar-perdidas-defensor">-</button>
                <input type="number" id="input-perdidas-defensor" value="0" min="0">
                <button id="btn-sumar-perdidas-defensor">+</button>
            </div>
        </div>
        <div class="botones-modal">
             <button id="btn-confirmar-batalla" class="btn-confirmar">‚úîÔ∏è Confirmar</button>
             <button id="btn-cancelar-batalla" class="btn-cancelar">‚úñÔ∏è Cancelar</button>
        </div>
    </div>
    <!-- Fin Modal Batalla -->

    <!-- ****** NUEVO: Modal Reclutar ****** -->
    <div id="modal-reclutar" class="modal-juego" style="display: none;">
        <button class="modal-cerrar" onclick="cerrarModal('modal-reclutar')">X</button> <!-- Gen√©rico -->
        <h2>Reclutar Unidades</h2>
        <div class="campo-formulario">
            <label for="select-territorio-reclutar">Reclutar en:</label>
            <select id="select-territorio-reclutar"><option value="">-- Selecciona territorio --</option></select>
        </div>
        <div class="campo-formulario">
            <label for="select-unidad-reclutar">Tipo de Unidad:</label>
            <select id="select-unidad-reclutar">
                <option value="regulares">Tropa Regular</option>
                <option value="mercenario">Mercenario</option>
                <option value="barco">Barco</option>
                <option value="torreAsedio">Torre de Asedio</option>
                <option value="catapulta">Catapulta</option>
                <option value="escorpion">Escorpi√≥n</option>
                <!-- Opciones espec√≠ficas de facci√≥n se a√±adir√°n din√°micamente -->
            </select>
        </div>
        <div class="campo-formulario">
            <label for="input-cantidad-reclutar">Cantidad:</label>
            <div class="control-numero">
                <button onclick="ajustarCantidadReclutar(-1)">-</button>
                <input type="number" id="input-cantidad-reclutar" value="1" min="1">
                <button onclick="ajustarCantidadReclutar(1)">+</button>
            </div>
        </div>
        <div id="costo-reclutamiento" style="text-align: center; margin-top: 15px; font-weight: bold;">
            Costo: <span id="costo-reclutar-valor">--</span> <img src="../imgs/Interfaz/oro.png" alt="oro" class="icono-inline">
        </div>
        <div id="limite-reclutamiento-info" style="text-align: center; margin-top: 5px; font-size: 0.9em; color: #ccc;">
             L√≠mite turno: <span id="limite-reclutar-actual">0</span> / <span id="limite-reclutar-maximo">0</span>
        </div>
        <div class="botones-modal">
             <button id="btn-confirmar-reclutar" class="btn-confirmar">‚úîÔ∏è Reclutar</button>
             <button class="btn-cancelar" onclick="cerrarModal('modal-reclutar')">‚úñÔ∏è Cancelar</button>
        </div>
    </div>
    <!-- Fin Modal Reclutar -->

     <!-- ****** NUEVO: Modal Construir ****** -->
    <div id="modal-construir" class="modal-juego" style="display: none;">
        <button class="modal-cerrar" onclick="cerrarModal('modal-construir')">X</button>
        <h2>Construir Edificio</h2>
        <div class="campo-formulario">
            <label for="select-territorio-construir">Construir en:</label>
            <select id="select-territorio-construir"><option value="">-- Selecciona territorio --</option></select>
        </div>
        <div class="campo-formulario">
            <label for="select-edificio-construir">Tipo de Edificio:</label>
            <select id="select-edificio-construir">
                <option value="">-- Selecciona --</option>
                <optgroup label="Producci√≥n">
                    <option value="Granja">Granja</option>
                    <option value="Cantera">Cantera</option>
                    <option value="Mina">Mina</option>
                    <option value="Aserradero">Aserradero</option>
                </optgroup>
                 <optgroup label="Militar">
                    <option value="Castillo">Castillo</option>
                    <option value="Puerto">Puerto</option>
                    <option value="Taller de maquinaria de asedio">Taller de Asedio</option>
                 </optgroup>
                 <!-- Edificios de facci√≥n se a√±adir√°n din√°micamente -->
            </select>
        </div>
         <div id="costo-construccion" style="text-align: center; margin-top: 15px; font-weight: bold;">
            Costo: <span id="costo-construir-valor">--</span> <img src="../imgs/Interfaz/oro.png" alt="oro" class="icono-inline">
        </div>
         <div id="limite-construccion-info" style="text-align: center; margin-top: 5px; font-size: 0.9em; color: #ccc;">
             (<span id="limite-construir-actual">0</span> / <span id="limite-construir-maximo">1</span> edificios este turno)
        </div>
        <div class="botones-modal">
             <button id="btn-confirmar-construir" class="btn-confirmar">‚úîÔ∏è Construir</button>
             <button class="btn-cancelar" onclick="cerrarModal('modal-construir')">‚úñÔ∏è Cancelar</button>
        </div>
    </div>
    <!-- Fin Modal Construir -->


    <!-- Modal Mis Territorios (Sin cambios estructurales) -->
    <div id="modal-mis-territorios" class="modal-juego" style="display: none;">
        <button id="btn-cerrar-modal-territorios" class="modal-cerrar">X</button>
        <h2>Mis Territorios (<span id="contador-territorios">0</span>)</h2>
        <p>Ingresos por turno: <span id="oro-generado-territorios">0</span> <img src="../imgs/Interfaz/oro.png" alt="oro" class="icono-inline"></p>
        <div class="lista-scrollable">
            <ul id="lista-mis-territorios"><li>Cargando...</li></ul>
        </div>
         <div class="botones-modal">
             <button id="btn-ok-modal-territorios" class="btn-confirmar">OK</button>
        </div>
    </div>
    <!-- Fin Modal Mis Territorios -->

    <!-- ****** NUEVO: Contenedor para Info Adicional (Rumores, etc.) ****** -->
    <div id="info-adicional" style="position: fixed; bottom: 10px; left: 10px; background-color: rgba(0,0,0,0.7); padding: 10px; border-radius: 8px; max-width: 250px; z-index: 5;">
        <h4>Rumores Desbloqueados:</h4>
        <ul id="lista-rumores" style="list-style: none; padding: 0; margin: 0; font-size: 0.9em;">
            <li>(Ninguno)</li>
        </ul>
        <!-- Aqu√≠ se podr√≠a a√±adir m√°s info: estado invierno, pr√©stamos, etc. -->
    </div>

  <script src="../javascript/scriptjuego.js"></script>
</body>
</html>