<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Magnar WarGames - Juego</title>
  <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
  <link rel="stylesheet" href="../css/stylejuego.css">
</head>
<body>
    <!-- BARRA SUPERIOR (Sin cambios) -->
    <div id="top-bar">
        <div id="logo-casa-container">
             <img id="logo-casa" src="" alt="Logo de casa">
        </div>
        <div id="oro-jugador" style="display: none;">
            <img src="../imgs/Interfaz/oro.png" alt="Oro">
            <span id="cantidad-oro">0</span>
        </div>
    </div>

    <!-- Info Turno/AcciÃ³n (Sin cambios) -->
    <div id="turno-jugador" class="turno-texto">Turno 1</div>
    <div id="accion-jugador" class="accion-texto">AcciÃ³n 1</div>
    <div id="estado-turno"></div>

    <!-- Modal Tyrell Inicio Combinado -->
<div id="modal-inicial-tyrell" class="modal-juego" style="display: none; z-index: 99999;">
  <h2>ğŸŒ¿ Tyrell: Configura tu inicio</h2>

  <div class="campo-formulario">
    <label for="select-tyrell-granja">Selecciona territorio para tu Granja:</label>
    <select id="select-tyrell-granja"><option value="">-- Selecciona --</option></select>
  </div>

  <div class="campo-formulario">
    <label for="input-oro-tyrell">ğŸ’° Oro Extra:</label>
    <input type="number" id="input-oro-tyrell" min="0" value="50" style="width: 100%;">
  </div>

  <div class="campo-formulario">
    <label for="input-tropas-tyrell">ğŸ›¡ï¸ Tropas Iniciales:</label>
    <input type="number" id="input-tropas-tyrell" min="0" value="30" style="width: 100%;">
  </div>

  <div class="campo-formulario">
      <label for="select-rumor-inicial-tyrell">ğŸ“œ Rumor inicial:</label>
      <select id="select-rumor-inicial-tyrell">
        <option value="">-- Ninguno --</option>
      </select>
    </div>



  <div class="botones-modal" style="margin-top: 20px;">
    <button id="btn-confirmar-inicial-tyrell" class="btn-confirmar" style="width: 100%;">
      âœ”ï¸ Confirmar
    </button>
  </div>
</div>

<!-- Modal Arryn Inicio Combinado -->
<div id="modal-inicial-arryn" class="modal-juego" style="display: none; z-index: 99999;">
  <h2>ğŸ¦… Arryn: Configura tu inicio</h2>

  <div class="campo-formulario">
    <label for="input-caballeros-arryn">Â¿Con cuÃ¡ntos caballeros comienzas?</label>
    <input type="number" id="input-caballeros-arryn" min="0" value="0" style="width: 100%;">
  </div>

  <div class="campo-formulario">
    <label for="input-oro-arryn">ğŸ’° Oro Extra:</label>
    <input type="number" id="input-oro-arryn" min="0" value="50" style="width: 100%;">
  </div>

  <div class="campo-formulario">
    <label for="input-tropas-arryn">ğŸ›¡ï¸ Tropas Iniciales:</label>
    <input type="number" id="input-tropas-arryn" min="0" value="30" style="width: 100%;">
  </div>

  <div class="campo-formulario">
      <label for="select-rumor-inicial-arryn">ğŸ“œ Rumor inicial:</label>
      <select id="select-rumor-inicial-arryn">
        <option value="">-- Ninguno --</option>
      </select>
    </div>

  <div class="botones-modal" style="margin-top: 20px;">
    <button id="btn-confirmar-inicial-arryn" class="btn-confirmar" style="width: 100%;">
      âœ”ï¸ Confirmar
    </button>
  </div>
</div>




    <!-- CONTENEDOR BOTONES ACCIÃ“N (Sin cambios estructurales) -->
    <div id="acciones-container">
        <button id="btn-batalla" class="btn-accion-juego">âš”ï¸ Batalla</button>
        <button id="btn-reclutar" class="btn-accion-juego">â• Reclutar</button>
        <button id="btn-construir" class="btn-accion-juego">ğŸ”¨ Construir</button>
        <button id="btn-mover" class="btn-accion-juego">â¡ï¸ Mover</button> <!-- Texto actualizado -->
        <button id="btn-reorganizar" class="btn-accion-juego">ğŸ”„ Reorganizar</button>
        <!-- PodrÃ­amos aÃ±adir botones para habilidades especÃ­ficas aquÃ­ -->
         <!-- Botones exclusivos para Stark -->
    </div>
    <div id="acciones-container2">
          <div id="contador-stark" style="margin: 10px; font-weight: bold; font-size: 1.2em;">
          Contador acciones del norte: <span id="valor-contador-stark">0</span>
        </div>
        <button id="btn-stark-atacar" class="btn-accion-juego">ğŸ§Š Atacar en el norte</button>
        <button id="btn-stark-mover" class="btn-accion-juego">â¡ï¸ Mover en el norte</button>
        <button id="btn-stark-reorganizar" class="btn-accion-juego">ğŸ”„ Reorganizar en el norte</button>
        <button id="btn-stark-reclutar" class="btn-accion-juego" >â• Reclutar en el norte</button>
        <!-- Contador de acciones del norte (solo para Stark) -->
    </div>
      

    <!-- Modal Ataque Simple Mejorado -->
<div id="modal-ataque-simple" class="modal-juego" style="display: none;">
  <h2>âš”ï¸ Ataque</h2>

  <!-- Primer territorio -->
  <div class="campo-formulario">
    <label for="select-territorio-ataque1">ğŸ›¡ï¸ Primer territorio a atacar:</label>
    <select id="select-territorio-ataque1"><option value="">-- Selecciona --</option></select>
  </div>

  <!-- Segundo territorio -->
  <div class="campo-formulario">
    <label for="select-territorio-ataque2">ğŸ›¡ï¸ Segundo territorio (opcional):</label>
    <select id="select-territorio-ataque2"><option value="">-- Ninguno --</option></select>
  </div>

  <!-- Lista de pÃ©rdidas por unidad -->
  <div class="campo-formulario">
    <div id="contenedor-perdidas-ataque"></div>
  </div>

  <!-- Â¿GanÃ³ el primer territorio? -->
  <div class="campo-formulario">
    <label>Â¿Ganaste el PRIMER territorio?</label><br>
    <label><input type="radio" name="resultado-ataque1" value="si" checked> SÃ­</label>
    <label><input type="radio" name="resultado-ataque1" value="no"> No</label>
    <div id="asignar-propietario-ataque1" class="campo-formulario" style="display: none;">
  <label for="select-propietario-ataque1">Â¿QuiÃ©n se queda con el PRIMER territorio?</label>
  <select id="select-propietario-ataque1">
    <option value="">-- Elige casa --</option>
  </select>
</div>


  </div>

  <!-- Â¿GanÃ³ el segundo territorio? -->
  <div class="campo-formulario">
    <label>Â¿Ganaste el SEGUNDO territorio?</label><br>
    <label><input type="radio" name="resultado-ataque2" value="si" checked> SÃ­</label>
    <label><input type="radio" name="resultado-ataque2" value="no"> No</label>
    <<div id="asignar-propietario-ataque2" class="campo-formulario" style="display: none;">
  <label for="select-propietario-ataque2">Â¿QuiÃ©n se queda con el PRIMER territorio?</label>
  <select id="select-propietario-ataque2">
    <option value="">-- Elige casa --</option>
  </select>
</div>


  </div>

  <!-- Botones -->
  <div class="botones-modal" style="margin-top: 20px;">
    <button class="btn-confirmar" onclick="confirmarAtaqueSimple()">âœ”ï¸ Confirmar</button>
    <button class="btn-cancelar" onclick="cerrarModal('modal-ataque-simple')">âœ–ï¸ Cancelar</button>
  </div>
</div>

  <button id="btn-levas-stark" class="btn-accion-juego" style="display: none;">ğŸ›¡ï¸ Levantamiento de Levas</button>
  <button id="btn-organizar-torneo" class="btn-accion-juego" style="display: none;">ğŸ‡ Organizar Torneo</button>
  <button id="btn-doble-impuestos" class="btn-accion-juego" style="display: none;">ğŸ’° Doble Impuestos</button>
  <button id="btn-sobornar-soldados" class="btn-accion-juego" style="display: none;">ğŸª™ Sobornar Soldados</button>
  <button id="btn-saquear-greyjoy" class="btn-accion-juego" style="display: none;">âš“ Saquear</button>
  <button id="btn-ritual-kraken-greyjoy" class="btn-accion-juego" style="display: none;">ğŸ™ Ritual de Sal</button>


    <!-- Modal Organizar Torneo -->
<div id="modal-torneo-arryn" class="modal-juego" style="display: none; z-index: 99999;">
  <h2>ğŸ‡ Organizar Torneo</h2>
  <p>Â¿CuÃ¡ntos caballeros deseas ganar?</p>
  <input type="number" id="input-caballeros-torneo" min="1" value="1" style="width: 100%; margin-top: 10px;">
  <div class="botones-modal" style="margin-top: 20px;">
    <button id="btn-confirmar-torneo" class="btn-confirmar">âœ”ï¸ Confirmar</button>
    <button class="btn-cancelar" onclick="cerrarModal('modal-torneo-arryn')">âœ–ï¸ Cancelar</button>
  </div>
</div>

<div id="modal-caballero-batalla-arryn" class="modal-juego" style="display: none; z-index: 99999;">
  <h2>ğŸ›¡ï¸ Â¿Ganas un caballero?</h2>
  <p>Â¿Deseas aÃ±adir un caballero a tus tropas?</p>
  <div class="botones-modal" style="margin-top: 20px;">
    <button onclick="confirmarCaballeroArryn(true)" class="btn-confirmar">âœ”ï¸ SÃ­</button>
    <button onclick="confirmarCaballeroArryn(false)" class="btn-cancelar">âœ–ï¸ No</button>
  </div>
</div>




    <!-- Modal Reclutar (NUEVO) -->
<div id="modal-reclutar" class="modal-juego" style="display: none;">
    <button class="modal-cerrar" onclick="cerrarModal('modal-reclutar')">X</button>
    <h2>Reclutar Tropas</h2>
    <div id="contenedor-reclutas" style="display: flex; justify-content: space-around; gap: 10px; flex-wrap: wrap;">
      
      <!-- Soldado -->
      <div class="recluta-box" data-tipo="soldado" data-costo="4">
        <h3>Soldado</h3>
        <img src="../imgs/reclutas/soldado.png" alt="Soldado" style="width: 80px;">
        <div class="control-numero">
          <button onclick="ajustarCantidad('soldado', -1)">-</button>
          <span id="cantidad-soldado">0</span>
          <button onclick="ajustarCantidad('soldado', 1)">+</button>
        </div>
        <p>Coste: 4 oro</p>
      </div>
  
      <!-- Mercenario -->
      <div class="recluta-box" data-tipo="mercenario" data-costo="5">
        <h3>Mercenario</h3>
        <img src="../imgs/reclutas/mercenario.png" alt="Mercenario" style="width: 80px;">
        <div class="control-numero">
          <button onclick="ajustarCantidad('mercenario', -1)">-</button>
          <span id="cantidad-mercenario">0</span>
          <button onclick="ajustarCantidad('mercenario', 1)">+</button>
        </div>
        <p>Coste: 5 oro</p>
      </div>
  
      <!-- Mercenario de Ã©lite -->
      <div class="recluta-box" data-tipo="elite" data-costo="7">
        <h3>Mercenario de Ã©lite</h3>
        <img src="../imgs/reclutas/elite.png" alt="Mercenario Ã©lite" style="width: 80px;">
        <div class="control-numero">
          <button onclick="ajustarCantidad('elite', -1)">-</button>
          <span id="cantidad-elite">0</span>
          <button onclick="ajustarCantidad('elite', 1)">+</button>
        </div>
        <p>Coste: 7 oro</p>
      </div>

  
    </div>
  
    <div style="margin-top: 20px; text-align: center;">
      <p>Total de oro requerido: <span id="costo-total-recluta">0</span> <img src="../imgs/Interfaz/oro.png" alt="oro" class="icono-inline"></p>
      <button class="btn-confirmar" onclick="confirmarReclutamiento()">âœ”ï¸ Reclutar</button>
      <button class="btn-cancelar" onclick="cerrarModal('modal-reclutar')">âœ–ï¸ Cancelar</button>
      <p id="mensaje-reclutamiento" style="color: red; margin-top: 10px;"></p>
    </div>
  </div>
    <!-- Fin Modal Reclutar -->

     <!-- Modal Construir (Sin cambios estructurales) -->
    <div id="modal-construir" class="modal-juego" style="display: none;">
        <button class="modal-cerrar" onclick="cerrarModal('modal-construir')">X</button>
        <h2>Construir Edificio</h2>
        <div class="campo-formulario">
            <label for="select-territorio-construir">Construir en:</label>
            <select id="select-territorio-construir"><option value="">-- Selecciona territorio --</option></select>
        </div>
        <div class="campo-formulario">
            <label for="select-edificio-construir">Tipo de Edificio:</label>
            <select id="select-edificio-construir">
                <option value="">-- Selecciona --</option>
                <optgroup label="ProducciÃ³n">
                    <option value="Granja">Granja</option>
                    <option value="Cantera">Cantera</option>
                    <option value="Mina">Mina</option>
                    <option value="Aserradero">Aserradero</option>
                </optgroup>
                 <optgroup label="Militar">
                    <option value="Castillo">Castillo</option>
                    <option value="Puerto">Puerto</option>
                    <option value="Taller de maquinaria de asedio">Taller de Asedio</option>
                    <option value="Atalayas">Atalayas</option>
                    <option value="Academia de CaballerÃ­a">Academia de CaballerÃ­a</option>
                 </optgroup>
            </select>
        </div>
        <div id="contenedor-construccion-extra" class="campo-formulario" style="display: none;">
  <label for="select-territorio-construir-2">Segundo territorio:</label>
  <select id="select-territorio-construir-2"><option value="">-- Selecciona territorio --</option></select>

  <label for="select-edificio-construir-2">Segundo edificio:</label>
  <select id="select-edificio-construir-2">
    <option value="">-- Selecciona --</option>
  </select>
</div>

        <div class="botones-modal">
          <div id="costo-construccion" style="text-align: center; margin-top: 15px; font-weight: bold;">
            Costo: <span id="costo-construir-valor">--</span> <img src="../imgs/Interfaz/oro.png" alt="oro" class="icono-inline">
        </div>
         <div id="limite-construccion-info" style="text-align: center; margin-top: 5px; font-size: 0.9em; color: #ccc;">
             (<span id="limite-construir-actual">0</span> / <span id="limite-construir-maximo">1</span> edificios este turno)
        </div>
             <button id="btn-confirmar-construir" class="btn-confirmar">âœ”ï¸ Construir</button>
             <button class="btn-cancelar" onclick="cerrarModal('modal-construir')">âœ–ï¸ Cancelar</button>
        </div>
    </div>
    <!-- Fin Modal Construir -->
     

    <!-- Modal ElecciÃ³n MÃ¡quina de Asedio -->
<div id="modal-elegir-asedio" class="modal-juego" style="display: none;">
  <h2>Elige una mÃ¡quina de asedio</h2>
  <div style="display: flex; gap: 20px; justify-content: center;">
    <div onclick="elegirAsedioGratis('catapulta')" style="cursor: pointer; text-align: center;">
      <img src="../imgs/reclutas/catapulta.png" style="width: 80px;">
      <p>Catapulta</p>
    </div>
    <div onclick="elegirAsedioGratis('torre')" style="cursor: pointer; text-align: center;">
      <img src="../imgs/reclutas/torre.png" style="width: 80px;">
      <p>Torre</p>
    </div>
    <div onclick="elegirAsedioGratis('escorpion')" style="cursor: pointer; text-align: center;">
      <img src="../imgs/reclutas/escorpion.png" style="width: 80px;">
      <p>EscorpiÃ³n</p>
    </div>
  </div>
</div>


    <!-- ****** ELIMINADO Modal Mover/Atacar ****** -->

    <!-- Modal Mis Territorios (Sin cambios estructurales) -->
    <div id="modal-mis-territorios" class="modal-juego" style="display: none;">
        <button id="btn-cerrar-modal-territorios" class="modal-cerrar">X</button>
        <h2>Mis Territorios (<span id="contador-territorios">0</span>)</h2>
        <p>Oro estimado al final del turno: <span id="oro-estimado-final-turno">0</span> <img src="../imgs/Interfaz/oro.png" alt="oro" class="icono-inline"></p>
        <p>Ingresos por territorios: <span id="oro-generado-territorios">0</span> <img src="../imgs/Interfaz/oro.png" alt="oro" class="icono-inline"></p>
        <div class="lista-scrollable">
            <ul id="lista-mis-territorios"><li>Cargando...</li></ul>
        </div>
         <div class="botones-modal">
             <button id="btn-ok-modal-territorios" class="btn-confirmar">OK</button>
        </div>
    </div>
    <!-- Fin Modal Mis Territorios -->

    <div id="cuadro-rumores" style="
  position: fixed;
  bottom: 10px;
  right: 10px;
  background-color: #111;
  color: white;
  padding: 10px 15px;
  border-radius: 8px;
  font-size: 14px;
  max-width: 250px;
  z-index: 999;
  box-shadow: 0 0 10px rgba(0,0,0,0.5);
">
  <strong>ğŸ•µï¸ Rumores</strong>
  <p id="lista-rumores" style="padding-left: 15px; margin-top: 5px;"></p>
</div>

<!-- Modal: Â¿Has conseguido un rumor? -->
<div id="modal-ganar-rumor" class="modal-juego" style="display: none;">
  <h2>ğŸ•µï¸ Â¿Has conseguido un rumor?</h2>
  <div class="botones-modal">
    <button class="btn-confirmar" onclick="confirmarGanarRumor(true)">âœ”ï¸ SÃ­</button>
    <button class="btn-cancelar" onclick="confirmarGanarRumor(false)">âœ–ï¸ No</button>
  </div>
</div>

<!-- Modal: Elegir rumor -->
<div id="modal-elegir-rumor" class="modal-juego" style="display: none;">
  <h2>ğŸ“œ Â¿QuÃ© rumor conseguiste?</h2>
  <div class="campo-formulario">
    <label for="select-rumor">Selecciona uno:</label>
    <select id="select-rumor"></select>
  </div>
  <div class="botones-modal">
    <button class="btn-confirmar" onclick="confirmarRumorElegido()">âœ”ï¸ Confirmar</button>
  </div>
</div>

<!-- Modal Reclutar Huargos -->
<div id="modal-reclutar-huargos" class="modal-juego" style="display: none;">
  <h2>ğŸº Reclutar Huargos</h2>
  <div class="campo-formulario">
    <label for="cantidad-huargos">Â¿CuÃ¡ntos Huargos quieres reclutar?</label>
    <input type="number" id="cantidad-huargos" min="1" value="1" />
  </div>
  <div class="botones-modal">
    <button class="btn-confirmar" onclick="confirmarReclutarHuargos()">âœ”ï¸ Confirmar</button>
  </div>
</div>

<!-- Modal Reclutar Unicornios -->
<div id="modal-reclutar-unicornios" class="modal-juego" style="display: none;">
  <h2>ğŸ¦„ Reclutar Unicornios</h2>
  <div class="campo-formulario">
    <label for="cantidad-unicornios">Â¿CuÃ¡ntos Unicornios quieres reclutar?</label>
    <input type="number" id="cantidad-unicornios" min="1" value="1" />
  </div>
  <div class="botones-modal">
    <button class="btn-confirmar" onclick="confirmarReclutarUnicornios()">âœ”ï¸ Confirmar</button>
  </div>
</div>

<!-- Modal Reclutar MurciÃ©lagos -->
<div id="modal-reclutar-murcielagos" class="modal-juego" style="display: none;">
  <h2>ğŸ¦‡ Reclutar MurciÃ©lagos</h2>
  <div class="campo-formulario">
    <label for="cantidad-murcielagos">Â¿CuÃ¡ntos MurciÃ©lagos quieres reclutar?</label>
    <input type="number" id="cantidad-murcielagos" min="1" value="1" />
  </div>
  <div class="botones-modal">
    <button class="btn-confirmar" onclick="confirmarReclutarMurcielagos()">âœ”ï¸ Confirmar</button>
  </div>
</div>

<!-- Modal Reclutar Caballeros (Tully) -->
<div id="modal-reclutar-caballeros-tully" class="modal-juego" style="display: none;">
  <h2>âš”ï¸ Reclutar Caballeros</h2>
  <div class="campo-formulario">
    <label for="cantidad-caballeros-tully">Â¿CuÃ¡ntos Caballeros quieres reclutar?</label>
    <input type="number" id="cantidad-caballeros-tully" min="1" value="1" />
  </div>
  <div class="botones-modal">
    <button class="btn-confirmar" onclick="confirmarReclutarCaballerosTully()">âœ”ï¸ Confirmar</button>
  </div>
</div>

<!-- Modal Reclutar Guardia Real -->
<div id="modal-reclutar-guardiareal" class="modal-juego" style="display: none;">
  <h2>ğŸ›¡ï¸ Reclutar Guardia Real</h2>
  <div class="campo-formulario">
    <label for="cantidad-guardiareal">Â¿CuÃ¡ntos miembros de la Guardia Real quieres reclutar?</label>
    <input type="number" id="cantidad-guardiareal" min="1" value="1" />
  </div>
  <div class="botones-modal">
    <button class="btn-confirmar" onclick="confirmarReclutarGuardiaReal()">âœ”ï¸ Confirmar</button>
  </div>
</div>

<div id="modal-reemplazar-jinete" class="modal-juego" style="display: none;">
  <h2>ğŸ´ Jinete perdido</h2>
  <p>Â¿Deseas colocar otro jinete en su lugar?</p>
  <div class="botones-modal">
    <button onclick="confirmarReemplazoJinete(true)" class="btn-confirmar">âœ”ï¸ SÃ­</button>
    <button onclick="confirmarReemplazoJinete(false)" class="btn-cancelar">âœ–ï¸ No</button>
  </div>
</div>










    <!-- Modal para elegir recursos iniciales -->
<div id="modal-inicial" class="modal-juego" style="display: none; z-index: 9999; backdrop-filter: blur(2px);">
    <h2>âš™ï¸ Configura tus recursos iniciales</h2>
  
    <div class="campo-formulario">
      <label for="input-oro-inicial">ğŸ’° Oro Extra:</label>
      <input type="number" id="input-oro-inicial" min="0" value="50" style="width: 100%;">
    </div>
  
    <div class="campo-formulario">
      <label for="input-tropas-iniciales">ğŸ›¡ï¸ Tropas iniciales:</label>
      <input type="number" id="input-tropas-iniciales" min="0" value="30" style="width: 100%;">
    </div>

    <div class="campo-formulario">
      <label for="select-rumor-inicial">ğŸ“œ Rumor inicial:</label>
      <select id="select-rumor-inicial">
        <option value="">-- Ninguno --</option>
      </select>
    </div>

  
    <div class="botones-modal" style="margin-top: 20px;">
      <button id="btn-confirmar-iniciales" class="btn-confirmar" style="width: 100%;">
        âœ”ï¸ Confirmar
      </button>
    </div>
  </div>

<!-- Modal Fase Neutral -->
<div id="modal-fase-neutral" class="modal-juego" style="display: none;">
  <!-- Paso 1: PÃ©rdidas por unidad -->
  <div id="fase-neutral-paso1">
    <h2>Â¿QuÃ© unidades perdiste?</h2>
    <div id="lista-perdidas-por-unidad" class="lista-scrollable" style="max-height: 300px; overflow-y: auto; margin-bottom: 15px;">
      <!-- AquÃ­ se rellenarÃ¡ dinÃ¡micamente -->
    </div>
    <button id="btn-confirmar-perdidas-neutral">âœ”ï¸ Confirmar</button>
  </div>


  <!-- Paso 2: Â¿Perdiste territorios? -->
  <div id="fase-neutral-paso2" style="display:none;">
    <h2>Â¿Perdiste territorios?</h2>
    <button id="btn-si-perdi-territorios">SÃ­</button>
    <button id="btn-no-perdi-territorios">No</button>
  </div>

  <!-- Paso 3: Elegir territorios perdidos -->
  <div id="fase-neutral-paso3" style="display:none;">
    <h3>Selecciona los territorios que perdiste</h3>
    <div id="lista-territorios-perdidos" class="lista-scrollable"></div>

    <button id="btn-confirmar-territorios-perdidos">âœ”ï¸ Confirmar territorios</button>
  </div>

  <!-- Paso 4: Nuevo propietario por cada territorio -->
  <div id="fase-neutral-paso4" style="display:none;">
    <div id="contenedor-cambios-propietario"></div>
    <button id="btn-finalizar-fase-neutral">Finalizar</button>
  </div>
</div>


  <!-- ZONA DE UNIDADES MILITARES -->
<div id="zona-unidades-militares" style="position: fixed; top: 250px; left: 10px; background-color: rgba(0,0,0,0.7); padding: 15px; border-radius: 10px; width: 180px; z-index: 10;">
  <h3 style="margin: 0 0 10px; font-size: 1.2rem; color: white; text-align: center;">âš”ï¸ Unidades Militares</h3>
  <ul id="lista-unidades-jugador" style="list-style: none; padding: 0; margin: 0;"></ul>
</div>


  <!-- ZONA DE EDIFICIOS -->
<div id="zona-edificios" style="position: fixed; top: 250px; right: 10px; background-color: rgba(0,0,0,0.7); padding: 15px; border-radius: 10px; width: 180px; z-index: 10;">
    <h3 style="margin: 0 0 10px; font-size: 1.2rem; color: white; text-align: center;">ğŸ° Edificios</h3>
    <ul id="lista-edificios-jugador" style="list-style: none; padding: 0; margin: 0;"></ul>
  </div>

  <div id="modal-lannister-perdidas" class="modal-juego" style="display: none;">
  <h2>ğŸ©¸ Â¿QuÃ© unidades perdiste al cobrar impuestos?</h2>
  <p>Indica cuÃ¡ntas unidades militares has perdido:</p>

  <div id="lista-perdidas-lannister" class="lista-scrollable" style="max-height: 300px; overflow-y: auto; margin-bottom: 15px;">
    <!-- AquÃ­ se insertarÃ¡n los inputs -->
  </div>

  <div class="botones-modal">
    <button id="btn-confirmar-perdidas-impuestos" class="btn-confirmar">âœ”ï¸ Confirmar</button>
  </div>
</div>


  <div id="modal-soborno-lannister" class="modal-juego" style="display: none;">
    <h2>ğŸª™ Sobornar Soldados</h2>
  
    <div class="campo-formulario">
      <label for="select-territorio-soborno">Â¿DÃ³nde sobornas?</label>
      <select id="select-territorio-soborno"><option value="">-- Selecciona --</option></select>
    </div>
  
    <div class="campo-formulario">
      <label for="input-cantidad-soborno">Â¿CuÃ¡ntos soldados sobornas?</label>
      <input type="number" id="input-cantidad-soborno" min="1" value="1" style="width: 100%;">
    </div>
    <p id="mensaje-soborno-insuficiente" style="color: red; font-size: 0.9em; display: none; margin-top: 5px;">âš ï¸ Oro insuficiente</p>

  
    <div class="botones-modal">
      <button id="btn-confirmar-soborno" class="btn-confirmar">âœ”ï¸ Confirmar</button>
    </div>
  </div>

  <div id="modal-soborno-final-lannister" class="modal-juego" style="display: none;">
    <h2>ğŸ©¸ Resultado del Soborno</h2>
    <label for="input-tropas-perdidas-soborno-lannister">Â¿CuÃ¡ntas tropas perdiste?</label>
    <input type="number" id="input-tropas-perdidas-soborno-lannister" min="0" value="0" style="width: 100%; margin-bottom: 10px;">
    <label>Â¿Ganaste el territorio?</label>
    <div style="margin-top: 5px;">
      <label><input type="radio" name="soborno-resultado" value="si" checked> SÃ­</label>
      <label><input type="radio" name="soborno-resultado" value="no"> No</label>
    </div>
    <div class="botones-modal" style="margin-top: 15px;">
      <button id="btn-confirmar-soborno-final-lannister" class="btn-confirmar">âœ”ï¸ Confirmar</button>
    </div>
  </div>

  <div id="modal-soborno-final-defensor" class="modal-juego" style="display: none;">
    <h2>ğŸ©¸ Has sido sobornado</h2>
    <label for="input-tropas-perdidas-soborno-defensor">Â¿CuÃ¡ntas tropas perdiste?</label>
    <input type="number" id="input-tropas-perdidas-soborno-defensor" min="0" value="0" style="width: 100%; margin-bottom: 10px;">
    <div class="botones-modal" style="margin-top: 15px;">
      <button id="btn-confirmar-soborno-defensor" class="btn-confirmar">âœ”ï¸ Confirmar</button>
    </div>
  </div>
  
  <div id="modal-militantes-fe" class="modal-juego" style="display: none;">
    <h2>âœï¸ Militantes de la Fe</h2>
    <p>Tienes un Septo. Â¿CuÃ¡ntos militantes de la fe deseas recibir?</p>
    <input type="number" id="input-militantes-fe" min="1" value="1" style="width: 100%; margin-top: 10px;">
    <div class="botones-modal" style="margin-top: 20px;">
      <button onclick="confirmarMilitantesFe()" class="btn-confirmar">âœ”ï¸ Confirmar</button>
    </div>
  </div>

  <button id="btn-casarse-targaryen" class="btn-accion-juego" style="display: none;">ğŸ’ Casarse</button>

  <div id="modal-casarse-targaryen" class="modal-juego" style="display: none;">
  <h2>ğŸ’ Matrimonio Targaryen</h2>
  <p>Â¿Con quÃ© casa deseas casarte?</p>
  <select id="select-casa-matrimonio">
    <option value="">-- Elige casa --</option>
    <option value="Velaryon">Casa Velaryon</option>
    <option value="Qoherys">Casa Qoherys</option>
    <option value="Celtigar">Casa Celtigar</option>
  </select>
  <div class="botones-modal" style="margin-top: 20px;">
    <button id="btn-confirmar-casamiento" class="btn-confirmar">âœ”ï¸ Casarse</button>
    <button class="btn-cancelar" onclick="cerrarModal('modal-casarse-targaryen')">âœ–ï¸ Cancelar</button>
  </div>
</div>


  <!-- BotÃ³n solo para Tyrrell -->
<button id="btn-obtener-tecnologia" class="btn-accion-juego" style="display: none;">ğŸ”§ Obtener TecnologÃ­a</button>

<!-- Modal Pregunta TecnologÃ­a Tyrell -->
<div id="modal-pregunta-tecnologia" class="modal-juego" style="display: none;">
  <h2>Â¿Has conseguido tecnologÃ­a?</h2>
  <div class="botones-modal" style="margin-top: 20px;">
    <button id="btn-si-tecnologia" class="btn-confirmar">âœ”ï¸ SÃ­</button>
    <button id="btn-no-tecnologia" class="btn-cancelar">âœ–ï¸ No</button>
  </div>
</div>

<!-- Modal para elegir tecnologÃ­a -->
<div id="modal-tecnologia-trirren" class="modal-juego" style="display: none;">
  <h2>ğŸ“š Obtener TecnologÃ­a</h2>
  <p>Â¿QuÃ© tecnologÃ­a quieres construir?</p>

  <div class="campo-formulario">
    <label for="select-edificio-tecnologia">TecnologÃ­a:</label>
    <select id="select-edificio-tecnologia">
      <option value="">-- Selecciona --</option>
      <option value="ArmerÃ­a">ArmerÃ­a de los Lannister</option>
      <option value="ArquerÃ­a">ArquerÃ­a de los Tully</option>
      <option value="Academia de CaballerÃ­a">Academia de CaballerÃ­a de los Arryn</option>
    </select>
  </div>

  <div class="campo-formulario">
    <label for="select-territorio-tecnologia">Â¿DÃ³nde construirla?</label>
    <select id="select-territorio-tecnologia"></select>
  </div>

  <div class="botones-modal">
    <button id="btn-confirmar-tecnologia" class="btn-confirmar">âœ”ï¸ Confirmar</button>
    <button class="btn-cancelar" onclick="cerrarModal('modal-tecnologia-trirren')">âœ–ï¸ Cancelar</button>
  </div>
</div>

  
<!-- Modal de PÃ©rdidas por Batalla -->
<div id="modal-perdidas-ataque" class="modal-juego" style="display: none;">
  <h2>ğŸ©¸ Indica tus pÃ©rdidas</h2>
  <p>Selecciona cuÃ¡ntas unidades perdiste en la batalla:</p>

  <div id="lista-perdidas-ataque" class="lista-scrollable" style="max-height: 300px; overflow-y: auto; margin-bottom: 15px;">
    <!-- AquÃ­ se insertarÃ¡n los inputs dinÃ¡micamente -->
  </div>

  <div class="botones-modal">
    <button id="btn-confirmar-perdidas-ataque" class="btn-confirmar">âœ”ï¸ Confirmar</button>
  </div>
</div>

<div id="modal-refuerzos-tully" class="modal-juego" style="display: none;">
  <h2>ğŸ¹ Refuerzos Tully</h2>
  <p>Â¿Se te unen 3 caballeros y 1 arquero como refuerzos?</p>
  <div class="botones-modal">
    <button onclick="confirmarRefuerzosTully(true)" class="btn-confirmar">âœ”ï¸ SÃ­</button>
    <button onclick="confirmarRefuerzosTully(false)" class="btn-cancelar">âœ–ï¸ No</button>
  </div>
</div>


<div id="modal-asignar-territorios" class="modal-juego" style="display: none;">
  <h2>ğŸ° Asignar territorios conquistados</h2>
  <div id="lista-territorios-asignar" class="lista-scrollable" style="max-height: 300px; overflow-y: auto;">
    <!-- AquÃ­ se generarÃ¡ dinÃ¡micamente cada territorio con su selecciÃ³n de victoria y nuevo dueÃ±o -->
  </div>
  <button id="btn-confirmar-asignacion-territorios" class="btn-confirmar">âœ”ï¸ Confirmar</button>
</div>


  <!-- Modal para defensores: Â¿Has perdido tropas? -->
<div id="modal-perdidas-defensor" class="modal-juego" style="display: none;">
  <h2>ğŸ©¸ Â¿Perdiste tropas en la batalla?</h2>
  <p>Indica cuÃ¡ntas tropas has perdido de cada tipo:</p>

  <div id="lista-perdidas-defensor" class="lista-scrollable" style="max-height: 300px; overflow-y: auto; margin-bottom: 15px;">
    <!-- Se rellenarÃ¡ con inputs dinÃ¡micos -->
  </div>

  <div class="botones-modal">
    <button id="btn-confirmar-perdidas-defensor" class="btn-confirmar">âœ”ï¸ Confirmar</button>
  </div>
</div>



<!-- Modal Hijos Targaryen -->
<div id="modal-hijos-targaryen" class="modal-juego" style="display: none;">
  <h2>ğŸ‘¶ Â¿Has tenido un hijo?</h2>
  <div class="botones-modal">
    <button id="btn-hijo-si" class="btn-confirmar">âœ”ï¸ SÃ­</button>
    <button id="btn-hijo-no" class="btn-cancelar">âœ–ï¸ No</button>
  </div>
</div>

<!-- Modal EclosiÃ³n Huevos -->
<div id="modal-eclosion-huevo" class="modal-juego" style="display: none;">
  <h2>ğŸ£ Â¿Ha eclosionado este huevo?</h2>
  <p id="texto-eclosion-huevo">Huevo X</p>
  <div class="botones-modal">
    <button id="btn-eclosion-si" class="btn-confirmar">âœ”ï¸ SÃ­</button>
    <button id="btn-eclosion-no" class="btn-cancelar">âœ–ï¸ No</button>
  </div>
</div>

<div id="modal-levas-stark" class="modal-juego" style="display: none;">
  <h2>ğŸ›¡ï¸ Levantamiento de Levas</h2>
  <p>Â¿CuÃ¡ntas tropas (soldados normales) ganas?</p>
  <input type="number" id="input-levas-stark" min="1" value="1" style="width: 100%; margin-top: 10px;">
  <div class="botones-modal" style="margin-top: 20px;">
    <button id="btn-confirmar-levas-stark" class="btn-confirmar">âœ”ï¸ Confirmar</button>
    <button class="btn-cancelar" onclick="cerrarModal('modal-levas-stark')">âœ–ï¸ Cancelar</button>
  </div>
</div>

<div id="modal-saqueo-greyjoy" class="modal-juego" style="display: none;">
  <h2>âš“ Saqueo</h2>
  <p>Â¿CuÃ¡nto oro ganaste al saquear?</p>
  <input type="number" id="input-oro-saqueo" min="1" value="10" style="width: 100%; margin-top: 10px;">
  <div class="botones-modal" style="margin-top: 20px;">
    <button id="btn-confirmar-saqueo" class="btn-confirmar">âœ”ï¸ Confirmar</button>
    <button class="btn-cancelar" onclick="cerrarModal('modal-saqueo-greyjoy')">âœ–ï¸ Cancelar</button>
  </div>
</div>

<div id="modal-ritual-kraken" class="modal-juego" style="display: none;">
  <h2>ğŸ™ Â¿Has conseguido al Kraken?</h2>
  <div class="botones-modal">
    <button id="btn-si-ritual-kraken" class="btn-confirmar">âœ”ï¸ SÃ­</button>
    <button id="btn-no-ritual-kraken" class="btn-cancelar">âœ–ï¸ No</button>
  </div>
</div>




  
  
  
  <script defer src="../javascript/scriptjuego.js"></script>
</body>
</html>